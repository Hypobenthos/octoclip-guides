# 后台剪切板监听

应用在非前台运行时，持续监控系统剪贴板内容变化（文本、图片、文件等），在检测到变更后执行剪贴历史记录与跨设备同步。

## iOS 平台

- 能力边界：系统不支持真正的“后台持续监听”。iOS 14+ 前台读取会显示“已粘贴自…”提示。
- 推荐路径：用户触发或可见机制读取剪贴板，例如：
  - 打开 App 时读取
  - Share Extension 显式分享
  - 推送动作/捷径（Shortcuts）触发后在前台读取
  - 小组件/Live Activity 作为入口
- 体验建议：提供“手动同步/一键粘贴”、本地加密与可控历史管理。


## Android 平台

### Android 10+ 如何实现后台剪贴板监听

由于系统隐私限制，Android 10+ 默认限制后台访问剪贴板。可通过以下方案获得接近后台监听的体验与能力：
- 完整的剪贴历史
- 跨设备同步（包括附近同步与云同步）

#### 方法对比与推荐

| 方法       | 推荐程度 | 适合人群              | 特点                                        |
|------------|----------|-----------------------|---------------------------------------------|
| Shizuku    | ⭐⭐⭐⭐⭐   | 未Root但希望体验完整功能的用户 | 无需Root，但拥有与Root模式媲美的稳定性     |
| 无障碍模式 | ⭐⭐⭐⭐    | 普通用户              | 配置简单，无复杂操作                     |
| Root       | ⭐⭐⭐     | 已 Root 的高级用户    | 权限高、功能完整、配置后长期有效            |

---

### 1) Shizuku

**适用人群**
- 不想 Root，但希望体验完整功能的用户。

**优势**
- 稳定性高：更全面监测复制操作，后台监听更可靠。
- 相对安全：授权可控、可撤销，避免全面开放风险。
- 灵活性高：动态管理权限，按需授权。

**配置与详细步骤**
- [获取详细配置步骤](./background-monitoring/Android/shizuku/index.md)

---

### 2) 无障碍模式

**适用人群**
- 普通用户，不希望过多的复杂配置，并拥有类原生系统的用户。

**优势**
- 操作简单：系统设置中启用无障碍权限即可使用，易上手。
- 安全性较高：权限范围受系统限制，用户可见。

**配置与详细步骤**
- [获取详细配置步骤](./background-monitoring/Android/accessibility/index.md)

---

### 3) Root

**适用人群**
- 已完成 Root 的高级用户，追求系统完整控制。

**优势**
- 权限最高：可绕过系统限制，访问系统资源。
- 稳定可靠：配置完成后长期有效。
- 兼容性好：适配各 Android 版本。

**配置与详细步骤**
- [获取详细配置步骤](./background-monitoring/Android/root/)

### Android 10 及以下说明

在 Android 10（Q）及以下，系统提供剪贴板变更回调（如 ClipboardManager.OnPrimaryClipChangedListener），**无需任何配置**，即使不在前台也能稳定地监听到剪贴板变化。